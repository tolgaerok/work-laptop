{ pkgs, ... }: {

  imports = [

    #---------------------------------------------------------------------
    # Import custom in-house environment packages::
    #---------------------------------------------------------------------

    # ./trimmgenerations.nix
    ./copy-back-up.nix
    ./create-smb-user.nix
    ./git_upload.nix
    ./make-executable.nix
    ./mounter.nix
    ./my-nix-commands.nix
    ./my-pkgs.nix
    ./rsync-back-up.nix
    ./rsync-home-to-server.nix
    ./unmounter.nix


  ];

  environment = {
    systemPackages = with pkgs; [
  #####################################
  #  Android Utilities
  #####################################

      # adbfs-rootless          # Mount Android phones on Linux with adb, no root required
      # haskellPackages.adb     # Android Debug Bridge (ADB) protocol
      # android-tools           # Android SDK platform tools
      # android-file-transfer   # Reliable MTP client with minimalistic UI
      # droidcam                # Linux client for DroidCam app
      # scrcpy                  # Display and control Android devices over USB or TCP/IP
      # waydroid                # Waydroid is a container-based approach to boot a full Android system on a regular GNU/Linux system

  #####################################
  # Archive Utilities
  #####################################

      atool  # Archive command line helper
      gzip   # GNU zip compression program
      lz4    # Extremely fast compression algorithm
      lzip   # A lossless data compressor based on the LZMA algorithm
      lzo    # Real-time data (de)compression library
      lzop   # Fast file compressor
      p7zip  # A new p7zip fork with additional codecs and improvements (forked from https://sourceforge.net/projects/p7zip/)
      rar    # Utility for RAR archives
      rzip   # Compression program
      unzip  # An extraction utility for archives compressed in .zip format
      xz     # A general-purpose data compression software, successor of LZMA
      zip    # Compressor/archiver for creating and modifying zipfiles
      zstd   # Zstandard real-time compression algorithm

  #####################################
  # Multimedia Utilities
  #####################################

      audacity                 # Sound editor with graphical UI
      ffmpeg                   # A complete, cross-platform solution to record, convert and stream audio and video
      ffmpegthumbnailer        # A lightweight video thumbnailer
      libdvdcss                # A library for decrypting DVDs
      libdvdread               # A library for reading DVDs
      libopus                  # Open, royalty-free, highly versatile audio codec
      libvorbis                # Vorbis audio compression reference implementation
      mediainfo                # Supplies technical and tag information about a video or audio file
      mpg123                   # Fast console MPEG Audio Player and decoder library
      mplayer                  # A movie player that supports many video formats
      mpv                      # General-purpose media player, fork of MPlayer and mplayer2
      ocamlPackages.gstreamer  # Bindings for the GStreamer library which provides functions for playning and manipulating multimedia streams
      pulseaudioFull           # Sound server for POSIX and Win32 systems
      simplescreenrecorder     # A screen recorder for Linux
      video-trimmer            # Trim videos quickly

  #####################################
  # Database related
  #####################################

      with libsForQt5; [
        dbeaver         # Universal SQL Client. Supports MySQL, PostgreSQL, MariaDB, SQLite, and more
        pgmodeler       # A database modeling tool for PostgreSQL
        sqlitebrowser   # DB Browser for SQLite

  #####################################
  # Command Line Tools Utilities:
  #####################################

      bat            # A cat(1) clone with syntax highlighting and Git integration
      cliphist       # Wayland clipboard manager
      dialog         # Display dialog boxes from shell
      doas           # Executes the given command as another user
      fx             # Terminal JSON viewer
      fzf            # A command-line fuzzy finder written in Go
      vulkan-tools   # Khronos official Vulkan Tools and Utilities
      wayland-utils  # Wayland utilities (wayland-info)

  #####################################
  # Clipboard Utilities:
  #####################################
      cliphist       # Wayland clipboard manager
      wl-clipboard      # Command-line copy/paste utilities for Wayland
     # wl-clipboard-x11 # A wrapper to use wl-clipboard as a drop-in replacement for X11 clipboard tools

  #####################################
  # Code Search and Analysis:
  #####################################

     # ripgrep      # A utility that combines the usability of The Silver Searcher with the raw speed of grep
      ripgrep-all  # Ripgrep, but also search in PDFs, E-Books, Office documents, zip, tar.gz, and more

  #####################################
  # Development and Version Control:
  #####################################      

      direnv        # A shell extension that manages your environment
      graalvm17-ce  # High-Performance Polyglot VM
      mosh          # Mobile shell (ssh replacement)
      nix-direnv    # A fast, persistent use_nix implementation for direnv
      nixfmt        # An opinionated formatter for Nix
      nixos-option
      sublime4      # Sophisticated text editor for code, markup and prose
     # vscode # conflicts with vscode-with-extensions as this is just a stand alone
     # vscode-extensions.mkhl.direnv
     # vscode-extensions.brettm12345.nixfmt-vscode
      
  #####################################
  # Github related
  #####################################

      # git-extras # GIT utilities -- repo summary, repl, changelog population, author commit percentages and more
      # git-my     # List remote branches if they're merged and/or available locally
      # gitg       # GNOME GUI client to view git repositories
      # gitless    # Version control system built on top of Git
      # gitlint    # Linting for your git commit messages
      # glab       # GitLab CLI tool bringing GitLab to your command line
      # gh         # GitHub CLI tool
      #------------------------------------------------------------------------------------------------------------
      # gitfull provides: git-credential-libsecret, git, scalar, git-receive-pack, git-shell, git-upload-pack, gitk, 
      #                    git-cvsserver, git-http-backend git-upload-archive git-jump git-credential-netrc
      #------------------------------------------------------------------------------------------------------------
      gitFull      # Distributed version control system
      gitlab       # GitLab Community Edition
      hut          # A CLI tool for Sourcehut / sr.ht

  #####################################
  # Programming Languages and Tools:
  #####################################

      scala-cli
      python311Full   # idle3.11 python3.11-config idle python3-config pydoc pydoc3 pydoc3.11 idle3 2to3-3.11 2to3 python3.11 python3 python-config python

      julia  # High-level performance-oriented dynamical language for technical computing

  #####################################
  # Shell Enhancements and Utilities:
  #####################################

      rPackages.fontawesome
      zsh                     # The Z shell
      zsh-autosuggestions     # Fish shell autosuggestions for Zsh
      zsh-syntax-highlighting # Fish shell like syntax highlighting for Zsh
      fish                    # Smart and user-friendly command line shell

      cowsay                  # A program which generates ASCII pictures of a cow with a message
      fortune                 # uA program that displays a pseudorandom message from a database of quotations  
      lolcat                  # "lolcat" for colorful output
                              #------------------------------------
                              # Examples: fortune | cowsay -f tux
                              #           fortune | cowsay -e ^^
                              #           fortune | cowsay | lolcat
                              #------------------------------------

  #####################################
  # Text Editors and Utilities:
  #####################################

      kate
      libkate          # A library for encoding and decoding Kate streams
      libsFor  #####################################
  # Data Science Tools
  #####################################

      dvc        # Version Control System for Machine Learning Projects
      gnuplot    # A portable command-line driven graphing utility for many platforms
      iredis     # A Terminal Client for Redis with AutoCompletion and Syntax Highlighting
      litecli    # Command-line interface for SQLite
      luigi      # Python package that helps you build complex pipelines of batch jobs
      mpi        # Open source MPI-3 implementation
      quarto     # Open-source scientific and technical publishing system built on Pandoc
      root       # A data analysis framework
      visidata   # Interactive terminal multitool for tabular dataQt5.kate  # Advanced text editor
      neovim           # Vim text editor fork focused on extensibility and agility
      vim              # The most popular clone of the VI editor

  #####################################
  # Data Science Tools
  #####################################

      dvc        # Version Control System for Machine Learning Projects
      gnuplot    # A portable command-line driven graphing utility for many platforms
      iredis     # A Terminal Client for Redis with AutoCompletion and Syntax Highlighting
      litecli    # Command-line interface for SQLite
      luigi      # Python package that helps you build complex pipelines of batch jobs
      mpi        # Open source MPI-3 implementation
      quarto     # Open-source scientific and technical publishing system built on Pandoc
      root       # A data analysis framework
      visidata   # Interactive terminal multitool for tabular data

  #####################################
  # Image Scanning and Processing:
  #####################################

      nsxiv          # New Suckless X Image Viewer
      sane-backends  # SANE (Scanner Access Now Easy) backends
      scanbd         # Scanner button daemon
      sxiv           # Simple X Image Viewer
      
  #####################################
  # Downloading and Retrieving Files:
  #####################################

      clipgrab   # Video downloader for YouTube and other sites
      wget       # Tool for retrieving files using HTTP, HTTPS, and FTP
          
  #####################################
  # Messaging and Communication:
  #####################################

      discord                    # All-in-one cross-platform voice and text chat for gamers
     # whatsapp-for-linux        # Whatsapp desktop messaging app
      telegram-desktop           # Telegram Desktop messaging app
      element-desktop-wayland    # A feature-rich client for Matrix.org for Wayland
     # element-desktop            # A feature-rich client for Matrix.org
      caprine-bin                # An elegant Facebook Messenger desktop app

      betterbird                 # Betterbird is a fine-tuned version of Mozilla Thunderbird, Thunderbird on steroids, if you will


  #####################################
  # Miscellaneous:
  #####################################

      flatpak                    # Linux application sandboxing and distribution framework 
      libsForQt5.kweather        # Weather application for Plasma Mobile
      libsForQt5.kweathercore    # Library to facilitate retrieval of weather information including forecasts and alerts
      variety                    # A wallpaper manager for Linux systems

  #####################################
  # Media and Entertainment:
  #####################################

      vlc                        # Cross-platform media player and streaming server
      youtube-dl                 # Command-line tool to download videos from YouTube.com and other sites
      media-downloader           # A Qt/C++ GUI front end to youtube-dl

      # Picture manger         
      digikam                    # Photo Management Program
      shotwell                   # Popular photo organizer for the GNOME desktop
 
      gimp-with-plugins          # The GNU Image Manipulation Program
      inkscape-with-extensions   # Vector graphics editor
      blender                    # 3D Creation/Animation/Publishing System

      #brasero                   # A Gnome CD/DVD Burner

  #####################################
  # Samba and Networking:
  #####################################

      samba4Full
      cifs-utils

  #-------------------------------------
  # Add the required packages for iwd backend
  #-------------------------------------
    iwd
    # iwd-tools
  #-------------------------------------
  # Network Testing and Monitoring:
  #-------------------------------------
      doppler
      ookla-speedtest
  #-------------------------------------
  # Remote Access and Automation:
  #-------------------------------------

      heroku
      openssh
      powershell
      sshpass
      teamviewer
      # nomachine-client
    ];
  };

  services.teamviewer.enable = true;
}


  #####################################
  # office
  #####################################
      
      libreoffice-fresh

      qownnotes # Plain-text file notepad and todo-list manager
      zotero    # Collect, organize, cite, and share your research sources
      qnotero   # Quick access to Zotero references
      
      onlyoffice-bin
      
      wpsoffice     

      deepin.deepin-calculator
      galculator
      speedcrunch

  #####################################
  # system tools
  #####################################

      isoimagewriter   # ISO Image Writer is a tool to write a .iso file to a USB disk.
      keepassxc        # Offline password manager with many features.
      testdisk-qt      # Data recovery utilities
      xscreensaver     # A set of screensavers
                       #---------------------------------------------
      ventoy-full      # A New Bootable USB Solution
                       # provides:  ventoy-plugson, ventoy-persistent 
                       # ventoy-extend-persistent, ventoy-web, ventoy

  #---------------------------------------------------------------------
  # File Management:
  #---------------------------------------------------------------------

      # USB and Device Utilities
      usbutils

      # XDG and File Managers
      xdg-desktop-portal-gtk
      xfce.thunar
      xfce.thunar-volman
      xfce.thunar-dropbox-plugin
      xfce.thunar-archive-plugin
      xfce.thunar-media-tags-plugin

      # Other Miscellaneous Programs
      blueberry
      efibootmgr
      gum
      krusader

  #---------------------------------------------------------------------
  # File Systems and Archiving:
  #---------------------------------------------------------------------

      # Libraries
      libarchive
      libbtbb

      #-------------------------------------------------------------------
      # Desktop Notify agent example:
      #notify-send --icon=fcitx --app-name="DONE" "Fonts folder copied into $(whoami)" "$font_dest" -u normal
      #-------------------------------------------------------------------
      libnotify

      #-------------------------------------------------------------------
      # Desktop Notify agent example:
      # notify-desktop --icon=call-start "Incoming call"
      #
      # SOURCE: https://github.com/nowrep/notify-desktop/tree/master
      #-------------------------------------------------------------------
      notify-desktop


  # ---------------------------------------------------------------------
  # File Transfer:
  # ---------------------------------------------------------------------
      filezilla
      libfilezilla
      rsync 
      transmission-gtk
      onedrive
      megasync
      rclone
      rclone-browser


  #####################################
  # system Utilities:
  #####################################
  
      # ---------------------------------------------------------------------
      # Disk Utilities
      # ---------------------------------------------------------------------
      gparted
      hw-probe # sudo -E hw-probe -all -upload
      ntfs3g

      # ---------------------------------------------------------------------
      # Terminal Utilities
      # ---------------------------------------------------------------------
      asunder
      bashInteractive
      cmatrix
      cowsay
      delta
      direnv
      duf
      fd
      figlet
      btop
      imagemagick
      inotify-tools         # inotifywait   inotifywatch    https://github.com/inotify-tools/inotify-tools/wiki
      isoimagewriter
      less
      lf
      lfs
      lsd
      lsdvd
      ncdu
      neofetch
      parallel-full
      pciutils
      pfetch
      pkgconfig
      pmutils
      psmisc
      sl
      stow
      tig
      tldr
      tree
      vim
      gnome.zenity    # For notifications and code dialogs

      # ---------------------------------------------------------------------
      # XDG Utilities
      # ---------------------------------------------------------------------
      xdg-launch
      xdg-utils

    ];
  };
}
{ pkgs, ... }: {
  environment = {
    systemPackages = with pkgs;
      [
        (vscode-with-extensions.override {

          vscode = vscodium;

          vscode = vscode;

          vscodeExtensions = with vscode-extensions;
            [
              b4dm4n.vscode-nixpkgs-fmt
              bbenoist.nix
              bmalehorn.vscode-fish
              bodil.file-browser
              bungcip.better-toml
              codezombiech.gitignore
              davidanson.vscode-markdownlint
              donjayamanne.githistory
              editorconfig.editorconfig
              esbenp.prettier-vscode
              formulahendry.code-runner
              grapecity.gc-excelviewer
              jnoortheen.nix-ide
              mechatroner.rainbow-csv
              mhutchie.git-graph
              naumovs.color-highlight
              pkief.material-icon-theme
              scala-lang.scala
              scalameta.metals
              shardulm94.trailing-spaces
              shd101wyy.markdown-preview-enhanced
              skyapps.fish-vscode
              streetsidesoftware.code-spell-checker
              tyriar.sort-lines
              yzhang.markdown-all-in-one
            ] ++ pkgs.vscode-utils.extensionsFromVscodeMarketplace [{
              name = "language-julia";
              publisher = "julialang";
              version = "1.48.1";
              sha256 =
                "986d9e38e8ad54f424d65889eb8bbd20035298e863431a69da3ed5a72e1dcb54";
            }];
        })
      ];
  };
}

      



{ pkgs, ... }:

  #---------------------------------------------------------------------
  # Enable flatpak
  #---------------------------------------------------------------------

{
  services.flatpak.enable = true;
  systemd.services.configure-flathub-repo = {
    wantedBy = [ "multi-user.target" ];
    path = [ pkgs.flatpak ];
    script = ''
      flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo
    '';
  };


}

{ pkgs, ... }: {
  # Web Browsers:
  environment = { systemPackages = with pkgs; [ firefox google-chrome ]; };

  programs = {
    firefox = {
      enable = true;
      policies = {
        CaptivePortal = false;
        DisableFirefoxAccounts = true;
        DisableFirefoxStudies = true;
        DisablePocket = true;
        DisableTelemetry = true;
        FirefoxHome = {
          Pocket = false;
          Snippets = false;
        };
        UserMessaging = {
          ExtensionRecommendations = false;
          SkipOnboarding = true;
        };
      };
    };
  };

  nixpkgs.config.firefox.enablePlasmaBrowserIntegration = true;

}
